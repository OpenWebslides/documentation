# Setup for developers

## Backend

Make sure your machine has a working installation of the Ruby version required by the project.
This version can be found in the `.ruby-version` file.
Usage of RVM is recommended to manage different Ruby versions and sets of gems.

```shell
# STEPS FOR INITIAL INSTALLATION
# Clone the repository
$ git clone git@github.com:OpenWebslides/openwebslides-backend.git
$ cd openwebslides-backend

# Use the correct Ruby version
$ rvm use `cat .ruby-version`@`cat .ruby-gemset` --create

# Install dependencies
$ gem install bundler
$ bundle install

# Create repository data path
$ mkdir data/

# Apply database migrations
$ bundle exec rails db:migrate

# Start server
$ bundle exec rails server
```

```shell
# STEPS FOR SUBSEQUENT NEW CODE
# Update the repository
$ git pull

# Update dependencies
$ bundle install

# Apply database migrations
$ bundle exec rails db:migrate

# Start server
$ bundle exec rails server
```

```shell
# USEFUL RAKE TASKS
# Suffix every command with `RAILS_ENV=test` to operate on the test database
$ bundle exec rails db:create       # Create database
$ bundle exec rails db:migrate      # Migrate database
$ bundle exec rails db:drop         # Drop database
$ bundle exec rails db:setup        # Create database and load schema
$ bundle exec rails db:reset        # Drop and migrate database
$ bundle exec rails db:clear        # Delete all data in the database
$ bundle exec rails db:sample       # Generate random sample data
```

## Frontend

Make sure your machine has a working installation of the Node version required by the project.

```shell
# STEPS FOR INITIAL INSTALLATION
# Clone the repository
$ git clone git@github.com:OpenWebslides/openwebslides-frontend.git
$ cd openwebslides-frontend

# Install dependencies
$ yarn

# Start server
$ yarn run dev-server
```

<aside class="notice">
  The default API endpoint of the frontend stack is currently set to <code>http://owsdev.ugent.be/api/</code> in the frontend <code>app/config/api.js</code> file.
  If you wish to use an alternative endpoint, you can change the defaults in this file.
  However, changes to this file should never be committed.
</aside>
